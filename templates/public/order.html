{% extends 'public/templates/base.html' %} {% block title %}Order{% endblock %}
{% set active_page = "order" %} {% block body %}

<div id="order-panel" class="container">
  <h1 class="menu-title display-4">Current Order</h1>
  <hr class="menu-title-hr" />
  <table id="menu-table" class="table table-sm table-hover">
    <thead>
      <tr>
        <th style="width: 65%">Item</th>
        <th style="width: 10%; text-align: center">Quantity</th>
        <th style="width: 10%; text-align: center">Price</th>
        <th style="width: 15%; text-align: right"></th>
      </tr>
    </thead>
    <tbody>
      {% set count = [ ] %} {% set j = 0 %} {% for item in order %}
      <tr class="table-danger">
        <td>{{ order[count|length][j] }}</td>
        <td style="text-align: center">1</td>
        <td style="text-align: center">
          <strong>${{ order[count|length][j + 1] }}</strong>
        </td>
        <td style="text-align: right">
          <form method="POST">
            <button
              id="btnRemoveFromOrder"
              type="submit"
              class="btn btn-danger"
              name="btn_remove_from_order"
              value="{{order[count|length][j]}}"
              onclick="alertMessage('success', 'Removed from order!'); "
            >
              <img
                src="../../../static/img/x-circle.svg"
                alt="x-circle"
                style="margin-right: 5px"
              />
              Remove
            </button>
          </form>
        </td>
      </tr>
      {% set i = count.append(1) %} {% endfor %}
    </tbody>
  </table>

  <div
    class="container-fluid bg-light"
    style="
      float: right;
      min-width: 232px;
      max-width: 300px;
      padding: 10px;
      border-radius: 10px;
      min-height: 185px;
      max-height: 300px;
    "
  >
    <div class="row" style="margin: 2px">
      <div class="col-8" style="text-align: right; padding: 0">
        <h5>Subtotal =</h5>
      </div>
      <div class="col-4" style="text-align: right; padding: 0">
        <h5 style="font-weight: 300">${{price}}</h5>
      </div>
    </div>
    <div class="row" style="margin: 2px">
      <div class="col-8" style="text-align: right; padding: 0">
        <h5>Tax =</h5>
      </div>
      <div class="col-4" style="text-align: right; padding: 0">
        <h5 style="font-weight: 300">${{"%.2f"|format(price * 0.13)}}</h5>
      </div>
    </div>
    <hr />
    <div class="row" style="margin: 2px">
      <div class="col-8" style="text-align: right; padding: 0">
        <h5>Grand Total =</h5>
      </div>
      <div class="col-4" style="text-align: right; padding: 0">
        <h5>${{"%.2f"|format(price * 1.13)}}</h5>
      </div>
    </div>
    <hr />
    <div class="row" style="margin: 2px">
      <div class="col" style="text-align: center">
        <form method="POST">
          <button
            type="submit"
            class="btn btn-success"
            value="checkout"
            name="btn_place_order"
            style="width: 100%"
          >
            <img
              src="../../../static/img/credit-card.svg"
              alt="credit-card"
              style="margin-right: 5px"
            />
            Proceed to Payment
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

{% endblock %}
